#
# test path handling functions
#
# the sample data are taken from the simulated structure in testing
#

test_pathhandling:
	$(call anrem-warn, Entering pathhandling.test)
# anrem-path-cut
	$(call anrem-assert-eq, Cutting sample/path/with/no/reps @ 1, \
		$(call anrem-path-cut, 1, sample/path/with/no/reps),\
		sample/path/with/no)
	$(call anrem-assert-eq, Cutting sample/path/with/no/reps @ 3, \
		$(call anrem-path-cut, 3, sample/path/with/no/reps),\
		sample/path)
	$(call anrem-assert-eq, Cutting sample/path/with/no/reps @ 0, \
		$(call anrem-path-cut, 0, sample/path/with/no/reps),\
		sample/path/with/no/reps)
	$(call anrem-assert-eq, Cutting sample/with/path/with/with/reps @ 0, \
		$(call anrem-path-cut, 0, sample/with/path/with/with/reps),\
		sample/with/path/with/with/reps)
	$(call anrem-assert-eq, Cutting sample/with/path/with/with/reps @ 1, \
		$(call anrem-path-cut, 1, sample/with/path/with/with/reps),\
		sample/with/path/with/with)
	$(call anrem-assert-eq, Cutting sample/with/path/with/with/reps @ 3, \
		$(call anrem-path-cut, 3, sample/with/path/with/with/reps),\
		sample/with/path)
# anrem-local
# save current path in order to not pollute it
	$(eval __tmp_current := $(ANREM_CURRENT_MODULE))
	$(eval ANREM_CURRENT_MODULE := dummy_current__)
	$(call anrem-assert-eq, Get local var name, $(call anrem-local, foo), foo_dummy_current__)
	$(call anrem-assert-eq, Set local var value, $(call anrem-local-set, foo, bar baz), $(NULL))
	$(call anrem-assert-eq, Get local var value, $(call anrem-local-get, foo), bar baz)
	$(eval ANREM_CURRENT_MODULE := $(__tmp_current))